<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Five Elements</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', 'Noto Sans KR', sans-serif;
            background-color: #F7F3EF;
            color: #374151;
        }
        .element, .relation-arrow {
            cursor: pointer;
            transition: opacity 0.2s ease-in-out;
        }
        .element:hover, .relation-arrow:hover {
            opacity: 0.7;
        }
        .element-emoji {
            font-size: 4.5rem;
            -webkit-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        .generation-arrow {
            stroke: #6ee7b7;
            stroke-width: 6;
            fill: none;
            marker-end: url(#arrow-gen);
        }
        .restraint-arrow {
            stroke: #f87171;
            stroke-width: 6;
            fill: none;
            marker-end: url(#arrow-res);
        }
        .clickable-path {
            stroke-width: 25;
            stroke: transparent;
            fill: none;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center p-4">

    <!-- Header -->
    <header class="w-full max-w-4xl mx-auto px-4 py-2 flex justify-between items-center">
        <a href="index.html" class="text-lg font-semibold text-gray-700 hover:text-gray-900 transition-colors">
            &larr; Interactive TCM
        </a>
        <a href="#" onclick="toggleLanguage(event)" class="px-3 py-1 text-stone-700 rounded-md text-sm font-bold hover:bg-stone-300 transition-colors" style="background-color: #EAE5E0;">
            Kor / Eng
        </a>
    </header>

    <!-- Main Content -->
    <main class="w-full max-w-4xl mx-auto flex-grow flex flex-col lg:flex-row items-center justify-center gap-8 mt-4">
        
        <!-- Five Elements Diagram -->
        <div class="relative w-full max-w-md aspect-square">
            <svg id="five-elements-svg" viewBox="0 0 500 500" class="w-full h-full">
                <!-- Arrow Markers -->
                <defs>
                    <marker id="arrow-gen" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
                        <path d="M 0 0 L 10 5 L 0 10 z" fill="#6ee7b7"></path>
                    </marker>
                    <marker id="arrow-res" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
                        <path d="M 0 0 L 10 5 L 0 10 z" fill="#f87171"></path>
                    </marker>
                </defs>

                <!-- Generation Arrows (相生) -->
                <g class="relation-arrow" data-relation="water_wood"><path class="generation-arrow" d="M 105 359 A 220 220 0 0 1 74 286"></path><path class="clickable-path" d="M 105 359 A 220 220 0 0 1 74 286"></path></g>
                <g class="relation-arrow" data-relation="wood_fire"><path class="generation-arrow" d="M 105 133 A 220 220 0 0 1 165 78"></path><path class="clickable-path" d="M 105 133 A 220 220 0 0 1 165 78"></path></g>
                <g class="relation-arrow" data-relation="fire_earth"><path class="generation-arrow" d="M 335 78 A 220 220 0 0 1 395 133"></path><path class="clickable-path" d="M 335 78 A 220 220 0 0 1 395 133"></path></g>
                <g class="relation-arrow" data-relation="earth_metal"><path class="generation-arrow" d="M 426 286 A 220 220 0 0 1 395 359"></path><path class="clickable-path" d="M 426 286 A 220 220 0 0 1 395 359"></path></g>
                <g class="relation-arrow" data-relation="metal_water"><path class="generation-arrow" d="M 290 405 A 220 220 0 0 1 210 405"></path><path class="clickable-path" d="M 290 405 A 220 220 0 0 1 210 405"></path></g>

                <!-- Restraint Arrows (相剋) -->
                <g class="relation-arrow" data-relation="wood_earth"><path class="restraint-arrow" d="M 149 194 L 351 194"></path><path class="clickable-path" d="M 149 194 L 351 194"></path></g>
                <g class="relation-arrow" data-relation="earth_water"><path class="restraint-arrow" d="M 365 230 L 200 359"></path><path class="clickable-path" d="M 365 230 L 200 359"></path></g>
                <g class="relation-arrow" data-relation="water_fire"><path class="restraint-arrow" d="M 181 341 L 244 139"></path><path class="clickable-path" d="M 181 341 L 244 139"></path></g>
                <g class="relation-arrow" data-relation="fire_metal"><path class="restraint-arrow" d="M 256 139 L 319 341"></path><path class="clickable-path" d="M 256 139 L 319 341"></path></g>
                <g class="relation-arrow" data-relation="metal_wood"><path class="restraint-arrow" d="M 300 359 L 135 230"></path><path class="clickable-path" d="M 300 359 L 135 230"></path></g>
                
                <!-- Elements -->
                <g class="element" data-element="fire" transform="translate(250, 70)">
                    <circle cx="0" cy="0" r="40" fill="transparent"></circle>
                    <text class="element-emoji" x="0" y="0" dominant-baseline="middle" text-anchor="middle">🔥</text>
                </g>
                <g class="element" data-element="earth" transform="translate(421, 194)">
                    <circle cx="0" cy="0" r="40" fill="transparent"></circle>
                    <text class="element-emoji" x="0" y="0" dominant-baseline="middle" text-anchor="middle">🧱</text>
                </g>
                <g class="element" data-element="metal" transform="translate(356, 395)">
                    <circle cx="0" cy="0" r="40" fill="transparent"></circle>
                    <text class="element-emoji" x="0" y="0" dominant-baseline="middle" text-anchor="middle">⚙️</text>
                </g>
                 <g class="element" data-element="water" transform="translate(144, 395)">
                    <circle cx="0" cy="0" r="40" fill="transparent"></circle>
                    <text class="element-emoji" x="0" y="0" dominant-baseline="middle" text-anchor="middle">💧</text>
                </g>
                <g class="element" data-element="wood" transform="translate(79, 194)">
                    <circle cx="0" cy="0" r="40" fill="transparent"></circle>
                    <text class="element-emoji" x="0" y="0" dominant-baseline="middle" text-anchor="middle">🌳</text>
                </g>
            </svg>
        </div>

        <!-- Information Display -->
        <div id="info-display" class="w-full lg:w-1/2 bg-white/50 backdrop-blur-sm rounded-xl p-6 shadow-lg border border-gray-200 min-h-[300px] overflow-y-auto max-h-[500px]">
            <h2 id="info-title" class="text-2xl font-bold text-gray-800 mb-4"></h2>
            <div id="info-content" class="text-gray-700 space-y-3"></div>
        </div>

    </main>

    <!-- Footer -->
    <footer class="w-full text-center py-6 text-gray-600 text-sm mt-8">
        © 2024 Hyungsuk Choi. All Rights Reserved.
    </footer>

    <script>
        const translations = {
            ko: {
                welcome_title: "오행(五行)",
                welcome_content: "각 원소나 관계 화살표를 클릭하여 자세한 내용을 확인하세요.",
                elements: {
                    wood: { title: "목(木)의 속성", content: `<strong>특징:</strong> 퍼지고 빠르다 (새싹, 바람)<br><strong>개념:</strong> 곡직(曲直) - 스프링처럼 굽은 것이 펴지는 힘` },
                    fire: { title: "화(火)의 속성", content: `<strong>특징:</strong> 오르고 뜨겁다 (불꽃)<br><strong>개념:</strong> 염상(炎上) - 위로 불타오르는 형상` },
                    earth: { title: "토(土)의 속성", content: `<strong>특징:</strong> 자양과 관리 (대지)<br><strong>개념:</strong> 가색(稼穡) - 농산물을 심고 거두는 것` },
                    metal: { title: "금(金)의 속성", content: `<strong>특징:</strong> 모으고 단단하다 (단련되는 쇠)<br><strong>개념:</strong> 종혁(從革) - 쇠가 담금질로 형태가 변함` },
                    water: { title: "수(水)의 속성", content: `<strong>특징:</strong> 내리고 차갑다 (폭포수)<br><strong>개념:</strong> 윤하(潤下) - 물이 흘러내리는 것` }
                },
                relations: {
                    wood_fire: { title: "목(木) → 화(火)", content: `<h3 class='font-bold text-lg text-sky-700'>생리적 관계</h3><p><strong>목생화:</strong> 나무는 불의 땔감이 되어 불을 더 강하게 합니다. 강하고 위로 솟는 나무의 기운이 가지를 뻗고 퍼져나가는 불의 성질을 낳습니다.</p><h3 class='font-bold text-lg mt-4 text-orange-700'>병리적 관계</h3><p><strong>목불생화:</strong> 나무가 부족하면 불을 만들지 못합니다.</p>` },
                    fire_earth: { title: "화(火) → 토(土)", content: `<h3 class='font-bold text-lg text-sky-700'>생리적 관계</h3><p><strong>화생토:</strong> 불이 타고 남은 재는 흙의 일부가 됩니다.</p><h3 class='font-bold text-lg mt-4 text-orange-700'>병리적 관계</h3><p><strong>화불생토:</strong> 불이 너무 약하면 재(흙)가 거의 생기지 않습니다.</p>` },
                    earth_metal: { title: "토(土) → 금(金)", content: `<h3 class='font-bold text-lg text-sky-700'>생리적 관계</h3><p><strong>토생금:</strong> 쇠는 땅 속에서 형성됩니다.</p><h3 class='font-bold text-lg mt-4 text-orange-700'>병리적 관계</h3><p><strong>토불생금:</strong> 흙이 척박하면 쇠(광석)가 만들어지지 않습니다.</p>` },
                    metal_water: { title: "금(金) → 수(水)", content: `<h3 class='font-bold text-lg text-sky-700'>생리적 관계</h3><p><strong>금생수:</strong> 차가운 쇠의 표면에 물방울이 맺힙니다.</p><h3 class='font-bold text-lg mt-4 text-orange-700'>병리적 관계</h3><p><strong>금불생수:</strong> 쇠가 뜨거우면 물방울이 맺히지 않습니다.</p>` },
                    water_wood: { title: "수(水) → 목(木)", content: `<h3 class='font-bold text-lg text-sky-700'>생리적 관계</h3><p><strong>수생목:</strong> 물은 나무의 성장을 촉진합니다.</p><h3 class='font-bold text-lg mt-4 text-orange-700'>병리적 관계</h3><p><strong>수불생목:</strong> 물이 너무 적으면 나무가 자라지 못합니다.</p>` },
                    wood_earth: { title: "목(木) ↔ 토(土)", content: `<h3 class='font-bold text-lg text-sky-700'>생리적 관계</h3><p><strong>목극토:</strong> 나무는 뿌리로 땅을 파고듭니다.</p><h3 class='font-bold text-lg mt-4 text-orange-700'>병리적 관계</h3><p><strong>목승토:</strong> 나무가 지나치게 크면 흙의 양분을 고갈시킵니다.</p><p><strong>토모목:</strong> 단단한 암석에는 나무가 뿌리를 내리지 못합니다.</p>` },
                    earth_water: { title: "토(土) ↔ 수(水)", content: `<h3 class='font-bold text-lg text-sky-700'>생리적 관계</h3><p><strong>토극수:</strong> 흙은 물을 막거나 흡수할 수 있습니다.</p><h3 class='font-bold text-lg mt-4 text-orange-700'>병리적 관계</h3><p><strong>토승수:</strong> 땅이 너무 광대하면 물을 말려버릴 수 있습니다.</p><p><strong>수모토:</strong> 물이 지나치게 많으면 흙으로도 막을 수 없습니다.</p>` },
                    water_fire: { title: "수(水) ↔ 화(火)", content: `<h3 class='font-bold text-lg text-sky-700'>생리적 관계</h3><p><strong>수극화:</strong> 물은 불을 끕니다.</p><h3 class='font-bold text-lg mt-4 text-orange-700'>병리적 관계</h3><p><strong>수승화:</strong> 물이 열을 초과하면 불이 꺼지거나 얼어붙을 수 있습니다.</p><p><strong>화모수:</strong> 불이 너무 강하면 물을 증발시킬 수 있습니다.</p>` },
                    fire_metal: { title: "화(火) ↔ 금(金)", content: `<h3 class='font-bold text-lg text-sky-700'>생리적 관계</h3><p><strong>화극금:</strong> 불은 쇠를 녹입니다.</p><h3 class='font-bold text-lg mt-4 text-orange-700'>병리적 관계</h3><p><strong>화승금:</strong> 강한 불은 쇠를 녹여 쓸모없게 만들 수 있습니다.</p><p><strong>금모화:</strong> 작은 불꽃으로는 큰 쇳덩이를 녹일 수 없습니다.</p>` },
                    metal_wood: { title: "금(金) ↔ 목(木)", content: `<h3 class='font-bold text-lg text-sky-700'>생리적 관계</h3><p><strong>금극목:</strong> 쇠 도구는 나무를 베어낼 수 있습니다.</p><h3 class='font-bold text-lg mt-4 text-orange-700'>병리적 관계</h3><p><strong>금승목:</strong> 쇠 도구로 과도하게 베면 나무를 파괴할 수 있습니다.</p><p><strong>목모금:</strong> 작은 쇠붙이로는 큰 나무를 벨 수 없습니다.</p>` }
                }
            },
            en: {
                welcome_title: "Five Elements",
                welcome_content: "Click on an element or a relationship arrow to see the details.",
                elements: {
                    wood: { title: "Properties of Wood (木)", content: `<strong>Characteristics:</strong> Spreading and fast (sprout, wind)<br><strong>Concept:</strong> Qū Zhí (曲直) - The force of a bent spring straightening.` },
                    fire: { title: "Properties of Fire (火)", content: `<strong>Characteristics:</strong> Rising and hot (flame)<br><strong>Concept:</strong> Yán Shàng (炎上) - The shape of flaring upwards.` },
                    earth: { title: "Properties of Earth (土)", content: `<strong>Characteristics:</strong> Nurturing and managing (earth)<br><strong>Concept:</strong> Jià Sè (稼穡) - Planting and harvesting crops.` },
                    metal: { title: "Properties of Metal (金)", content: `<strong>Characteristics:</strong> Gathering and hard (refined metal)<br><strong>Concept:</strong> Cóng Gé (從革) - Metal changing form through tempering.` },
                    water: { title: "Properties of Water (水)", content: `<strong>Characteristics:</strong> Descending and cold (waterfall)<br><strong>Concept:</strong> Rùn Xià (潤下) - Water flowing downwards.` }
                },
                relations: {
                    wood_fire: { title: "Wood → Fire", content: `<h3 class='font-bold text-lg text-sky-700'>Physiological</h3><p><strong>Wood Generates Fire:</strong> Wood serves as fuel, helping fire to burn more intensely. The strong, upward-rising energy of Wood gives rise to the branching, dispersing nature of Fire.</p><h3 class='font-bold text-lg mt-4 text-orange-700'>Pathological</h3><p><strong>Wood Fails to Generate Fire:</strong> If there is not enough wood, fire cannot be made.</p>` },
                    fire_earth: { title: "Fire → Earth", content: `<h3 class='font-bold text-lg text-sky-700'>Physiological</h3><p><strong>Fire Generates Earth:</strong> When fire burns out, it leaves behind ash, which becomes part of the earth.</p><h3 class='font-bold text-lg mt-4 text-orange-700'>Pathological</h3><p><strong>Fire Fails to Generate Earth:</strong> If the fire is too weak, it produces very little ash (earth).</p>` },
                    earth_metal: { title: "Earth → Metal", content: `<h3 class='font-bold text-lg text-sky-700'>Physiological</h3><p><strong>Earth Generates Metal:</strong> Metal is formed within the earth.</p><h3 class='font-bold text-lg mt-4 text-orange-700'>Pathological</h3><p><strong>Earth Fails to Generate Metal:</strong> If the soil is barren, metal (ore) cannot be created.</p>` },
                    metal_water: { title: "Metal → Water", content: `<h3 class='font-bold text-lg text-sky-700'>Physiological</h3><p><strong>Metal Generates Water:</strong> Condensation forms on cold metal surfaces.</p><h3 class='font-bold text-lg mt-4 text-orange-700'>Pathological</h3><p><strong>Metal Fails to Generate Water:</strong> If the metal is hot, condensation will not form.</p>` },
                    water_wood: { title: "Water → Wood", content: `<h3 class='font-bold text-lg text-sky-700'>Physiological</h3><p><strong>Water Generates Wood:</strong> Water nourishes and promotes the growth of wood.</p><h3 class='font-bold text-lg mt-4 text-orange-700'>Pathological</h3><p><strong>Water Fails to Generate Wood:</strong> If there is too little water, wood cannot grow.</p>` },
                    wood_earth: { title: "Wood ↔ Earth", content: `<h3 class='font-bold text-lg text-sky-700'>Physiological</h3><p><strong>Wood Controls Earth:</strong> Trees dig into the ground with their roots.</p><h3 class='font-bold text-lg mt-4 text-orange-700'>Pathological</h3><p><strong>Wood Overacts on Earth:</strong> An excessively large tree can deplete the nutrients in the soil.</p><p><strong>Earth Insults Wood:</strong> Trees cannot take root in hard rock.</p>` },
                    earth_water: { title: "Earth ↔ Water", content: `<h3 class='font-bold text-lg text-sky-700'>Physiological</h3><p><strong>Earth Controls Water:</strong> Soil can block or absorb water.</p><h3 class='font-bold text-lg mt-4 text-orange-700'>Pathological</h3><p><strong>Earth Overacts on Water:</strong> If the land is too vast, it can dry up the water.</p><p><strong>Water Insults Earth:</strong> An excess of water cannot be controlled even by earth.</p>` },
                    water_fire: { title: "Water ↔ Fire", content: `<h3 class='font-bold text-lg text-sky-700'>Physiological</h3><p><strong>Water Controls Fire:</strong> Water extinguishes fire.</p><h3 class='font-bold text-lg mt-4 text-orange-700'>Pathological</h3><p><strong>Water Overacts on Fire:</strong> When water far exceeds heat, it can cause the fire to be extinguished or frozen.</p><p><strong>Fire Insults Water:</strong> When fire is too intense, it can cause water to evaporate.</p>` },
                    fire_metal: { title: "Fire ↔ Metal", content: `<h3 class='font-bold text-lg text-sky-700'>Physiological</h3><p><strong>Fire Controls Metal:</strong> Fire melts metal.</p><h3 class='font-bold text-lg mt-4 text-orange-700'>Pathological</h3><p><strong>Fire Overacts on Metal:</strong> Intense fire can melt metal to the point of making it unusable.</p><p><strong>Metal Insults Fire:</strong> A large chunk of metal cannot be melted with a small flame.</p>` },
                    metal_wood: { title: "Metal ↔ Wood", content: `<h3 class='font-bold text-lg text-sky-700'>Physiological</h3><p><strong>Metal Controls Wood:</strong> Metal tools can cut down trees.</p><h3 class='font-bold text-lg mt-4 text-orange-700'>Pathological</h3><p><strong>Metal Overacts on Wood:</strong> Excessive cutting with metal tools can destroy wood.</p><p><strong>Wood Insults Metal:</strong> A large tree cannot be cut by a small piece of metal.</p>` }
                }
            }
        };

        let currentLang = 'ko';

        const infoTitle = document.getElementById('info-title');
        const infoContent = document.getElementById('info-content');

        function setLanguage(lang) {
            currentLang = lang;
            document.documentElement.lang = lang;
            const langData = translations[lang];
            
            infoTitle.textContent = langData.welcome_title;
            infoContent.innerHTML = `<p>${langData.welcome_content}</p>`;

            const url = new URL(window.location);
            url.searchParams.set('lang', lang);
        }

        function toggleLanguage(event) {
            event.preventDefault();
            const newLang = currentLang === 'ko' ? 'en' : 'ko';
            setLanguage(newLang);
        }

        function showInfo(title, content) {
            infoTitle.innerHTML = title;
            infoContent.innerHTML = content;
        }

        document.addEventListener('DOMContentLoaded', () => {
            const svg = document.getElementById('five-elements-svg');
            if (svg) {
                svg.addEventListener('click', (event) => {
                    const targetElement = event.target.closest('.element');
                    const targetArrow = event.target.closest('.relation-arrow');

                    if (targetElement) {
                        const elementKey = targetElement.dataset.element;
                        const data = translations[currentLang].elements[elementKey];
                        if (data) {
                            showInfo(data.title, data.content);
                        }
                        return;
                    }
                    
                    if (targetArrow) {
                        const relationKey = targetArrow.dataset.relation;
                        const data = translations[currentLang].relations[relationKey];
                        if (data) {
                            showInfo(data.title, data.content);
                        }
                    }
                });
            }
            
            const urlParams = new URLSearchParams(window.location.search);
            const langFromURL = urlParams.get('lang');
            const initialLang = (langFromURL === 'en' || langFromURL === 'ko') ? langFromURL : 'ko';
            setLanguage(initialLang);
        });

    </script>
</body>
</html>
