<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Root Word Puzzle</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Roboto+Mono:wght@500&display=swap');

        body {
            font-family: 'Inter', sans-serif;
        }

        .mono {
            font-family: 'Roboto Mono', monospace;
        }

        body {
            overscroll-behavior-y: none;
        }

        .shake {
            animation: shake 0.4s cubic-bezier(.36, .07, .19, .97) both;
        }

        @keyframes shake {

            10%,
            90% {
                transform: translate3d(-1px, 0, 0);
            }

            20%,
            80% {
                transform: translate3d(2px, 0, 0);
            }

            30%,
            50%,
            70% {
                transform: translate3d(-4px, 0, 0);
            }

            40%,
            60% {
                transform: translate3d(4px, 0, 0);
            }
        }

        .btn-letter {
            transition: all 0.1s;
            touch-action: manipulation;
        }

        .btn-letter:active {
            transform: scale(0.92);
        }

        .hidden {
            display: none !important;
        }

        /* Layout utility for swapping prefix/suffix order */
        .word-container {
            display: flex;
            align-items: flex-end;
            justify-content: center;
            gap: 0.25rem;
            flex-wrap: wrap;
            min-height: 3.5rem;
        }
    </style>
</head>

<body class="bg-gray-100 h-[100dvh] w-full flex items-center justify-center p-0 sm:p-4 overflow-hidden">

    <div
        class="bg-white w-full h-full sm:h-auto sm:max-h-[90vh] sm:max-w-md sm:rounded-3xl shadow-2xl overflow-hidden relative flex flex-col">

        <!-- Header -->
        <div
            class="bg-slate-900 text-white py-2.5 px-4 shrink-0 flex justify-between items-center z-20 relative shadow-md">
            <div class="flex items-center gap-2 cursor-pointer hover:opacity-80 transition-opacity"
                onclick="showMenu()">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="w-4 h-4">
                    <path d="m15 18-6-6 6-6" />
                </svg>
                <h1 class="text-base font-extrabold tracking-tight">ROOT WORD QUIZ</h1>
            </div>
            <div class="flex items-center gap-3">
                <div id="lives-container" class="flex gap-0.5 mt-0.5">
                    <!-- Lives injected here -->
                </div>
                <div id="progress-container"
                    class="text-[10px] font-bold bg-slate-800 px-2 py-1 rounded-full hidden border border-slate-700">
                    <span id="current-count">1</span> / <span id="total-count">10</span>
                </div>
            </div>
        </div>

        <!-- VIEW 1: MENU -->
        <div id="menu-view" class="flex-1 flex flex-col p-6 items-center overflow-hidden position-relative relative">

            <!-- Home Button -->
            <a href="index.html"
                class="absolute top-4 left-4 p-2 text-slate-400 hover:text-slate-600 transition-colors bg-white rounded-full shadow-sm border border-slate-100 flex items-center justify-center active:scale-95"
                title="Back to Home">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                    <polyline points="9 22 9 12 15 12 15 22"></polyline>
                </svg>
            </a>

            <h2 class="text-2xl font-black text-slate-800 mb-2 tracking-tight mt-6">SELECT ROOT</h2>
            <p class="text-slate-500 mb-2 text-center text-sm font-medium">Choose a category and root to practice.</p>
            <p class="text-slate-400 mb-6 text-center text-xs">
                Difficulty (easy to hard):
                <span class="text-yellow-600 font-bold">Yellow</span> -
                <span class="text-green-600 font-bold">Green</span> -
                <span class="text-blue-600 font-bold">Blue</span> -
                <span class="text-purple-500 font-bold">Purple</span> -
                <span class="text-red-500 font-bold">Red</span>
            </p>

            <!-- Tabs -->
            <div class="flex gap-2 mb-6 w-full max-w-sm">
                <button id="tab-medical" onclick="switchTab('medical')"
                    class="flex-1 py-2 rounded-xl font-bold text-sm transition-colors bg-blue-600 text-white shadow-md">
                    MEDICAL
                </button>
                <button id="tab-general" onclick="switchTab('general')"
                    class="flex-1 py-2 rounded-xl font-bold text-sm transition-colors bg-slate-200 text-slate-500 hover:bg-slate-300">
                    GENERAL
                </button>
            </div>

            <!-- Scrollable Grid Container -->
            <div class="flex-1 w-full overflow-y-auto">
                <div id="grid-medical" class="grid grid-cols-2 gap-3 w-full max-w-sm mx-auto pb-6">
                    <!-- Medical buttons injected here -->
                </div>
                <div id="grid-general" class="hidden grid grid-cols-2 gap-3 w-full max-w-sm mx-auto pb-6">
                    <!-- General buttons injected here -->
                </div>
            </div>
        </div>

        <!-- VIEW 2: GAME -->
        <div id="game-view" class="hidden flex-1 flex flex-col p-4 sm:p-6 items-center overflow-hidden">

            <div id="root-hint"
                class="text-slate-400 font-bold mb-2 text-xs uppercase tracking-widest bg-slate-100 px-3 py-1 rounded-full text-center">
                ROOT: AUDI- (TO HEAR)
            </div>

            <!-- Dynamic Word Display Area -->
            <div id="word-container" class="word-container mb-4 text-3xl sm:text-5xl font-black text-slate-800">
                <span id="fixed-part" class="text-slate-900"></span>
                <span id="input-part" class="flex gap-1"></span>
            </div>

            <div
                class="bg-slate-50 w-full p-4 sm:p-6 rounded-2xl border-2 border-slate-100 text-center mb-3 flex-1 flex flex-col justify-center items-center shadow-inner min-h-[4rem]">
                <p id="definition-text"
                    class="text-slate-700 font-bold text-lg sm:text-xl leading-tight overflow-y-auto">
                    Definition here
                </p>
            </div>

            <div class="w-full mt-auto shrink-0 pb-4 sm:pb-0">
                <div id="letters-container" class="grid grid-cols-5 gap-2 mb-3"></div>
                <div class="flex gap-3 h-14">
                    <button id="btn-hint" onclick="useHint()"
                        class="flex-1 bg-yellow-50 border-2 border-yellow-200 hover:bg-yellow-100 text-yellow-600 rounded-xl font-bold flex items-center justify-center gap-2 transition-all active:scale-95 disabled:opacity-50 disabled:grayscale">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="w-5 h-5">
                            <path
                                d="M15 14c.2-1 .7-1.7 1.5-2.5 1-1 1.5-2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5" />
                            <path d="M9 18h6" />
                            <path d="M10 22h4" />
                        </svg>
                        <span class="text-sm">HINT</span>
                        <span id="hint-count"
                            class="bg-yellow-400 text-white w-5 h-5 flex items-center justify-center rounded-full text-[10px]">3</span>
                    </button>
                    <button onclick="skipQuestion()"
                        class="px-6 rounded-xl bg-slate-200 text-slate-500 font-bold hover:bg-slate-300 transition-colors text-sm tracking-wide active:scale-95">
                        PASS
                    </button>
                </div>
            </div>
        </div>

        <!-- VIEW 3: RESULTS (Fixed Layout) -->
        <div id="result-view" class="hidden flex-1 flex flex-col p-6 items-center w-full h-full overflow-hidden">
            <h2 class="shrink-0 text-3xl font-black text-slate-800 mb-2">RESULTS</h2>
            <div id="score-display" class="shrink-0 text-6xl font-black text-blue-600 mb-8 tracking-tighter">
                8/10
            </div>
            <!-- Added min-h-0 to allow proper scrolling within flex container -->
            <div
                class="w-full flex-1 min-h-0 overflow-y-auto mb-6 rounded-2xl border border-slate-100 bg-slate-50 p-2 shadow-inner">
                <ul id="result-list" class="divide-y divide-slate-100"></ul>
            </div>
            <button onclick="showMenu()"
                class="shrink-0 w-full bg-slate-900 text-white py-4 rounded-2xl font-bold shadow-xl hover:bg-slate-800 transition-all active:scale-95">
                BACK TO MENU
            </button>
        </div>

        <div id="message-area"
            class="h-16 w-full absolute bottom-0 left-0 flex items-center justify-center text-lg font-bold text-white translate-y-full transition-transform duration-300 z-50 shadow-[0_-4px_20px_rgba(0,0,0,0.1)]">
            CORRECT!
        </div>
    </div>

    <script>
        // --- DATA ---
        // Root Metadata: Meaning, Color Theme, Category
        const rootData = {
            // MEDICAL
            "PNEUMON": { mean: "Lung", cat: "medical", color: "blue" },
            "REN": { mean: "Kidney", cat: "medical", color: "red" },
            "ALGIA": { mean: "Pain", cat: "medical", color: "rose" },
            "DYS": { mean: "Bad/Difficult", cat: "medical", color: "orange" },
            "ECTOMY": { mean: "Excision", cat: "medical", color: "emerald" },
            "OID": { mean: "Shape/Likeness", cat: "medical", color: "indigo" },
            "ENTERO": { mean: "Intestine", cat: "medical", color: "amber" },
            "EPI": { mean: "Upon/Over", cat: "medical", color: "purple" },
            "GASTRO": { mean: "Stomach", cat: "medical", color: "pink" },
            "EMIA": { mean: "Blood Condition", cat: "medical", color: "red" },
            "HEPA": { mean: "Liver", cat: "medical", color: "orange" },
            "HYDRO": { mean: "Water", cat: "medical", color: "cyan" },
            "ITIS": { mean: "Inflammation", cat: "medical", color: "rose" },
            "CARDIA": { mean: "Heart", cat: "medical", color: "red" },
            "LYSIS": { mean: "Destruction", cat: "medical", color: "slate" },
            "OMA": { mean: "Tumor", cat: "medical", color: "stone" },
            "URIA": { mean: "Urine", cat: "medical", color: "yellow" },
            "PARA": { mean: "Beside/Beyond", cat: "medical", color: "teal" },
            "PERI": { mean: "Around", cat: "medical", color: "lime" },
            "PLASIA": { mean: "Formation", cat: "medical", color: "green" },
            "RRHEA": { mean: "Flow", cat: "medical", color: "blue" },
            "SCOPE": { mean: "View", cat: "medical", color: "sky" },
            "TOMY": { mean: "Incision", cat: "medical", color: "gray" },
            "TROPHY": { mean: "Nourishment", cat: "medical", color: "emerald" },
            "GRAPH": { mean: "Write/Record", cat: "medical", color: "violet" },

            // GENERAL
            "AUDI": { mean: "To Hear", cat: "general", color: "blue" },
            "VIS": { mean: "To See", cat: "general", color: "indigo" },
            "SPECT": { mean: "To Look", cat: "general", color: "purple" },
            "TRACT": { mean: "To Pull", cat: "general", color: "teal" },
            "DUCT": { mean: "To Lead", cat: "general", color: "emerald" },
            "JECT": { mean: "To Throw", cat: "general", color: "rose" },
            "GRESS": { mean: "To Go", cat: "general", color: "cyan" },
            "FERRE": { mean: "To Carry", cat: "general", color: "amber" },
            "SIGHT": { mean: "To See", cat: "general", color: "sky" },
            "CISIONE": { mean: "To Cut", cat: "general", color: "red" },
            "CIRCUM": { mean: "Around", cat: "general", color: "orange" },
            "LOQUI": { mean: "To Speak", cat: "general", color: "lime" },
            "MALE": { mean: "Bad", cat: "general", color: "stone" },
            "META": { mean: "Beyond/Change", cat: "general", color: "fuchsia" },
            "MISSION": { mean: "To Send", cat: "general", color: "blue" },
            "MORPH": { mean: "Form", cat: "general", color: "pink" },
            "RECT": { mean: "Straight/Lead", cat: "general", color: "green" },
            "SCRIBE": { mean: "To Write", cat: "general", color: "slate" },
            "SOMNI": { mean: "Sleep", cat: "general", color: "indigo" },
            "SPIRE": { mean: "To Breathe", cat: "general", color: "sky" },
            "TEST": { mean: "Witness", cat: "general", color: "amber" },
            "TRANS": { mean: "Across", cat: "general", color: "violet" },
            "VOL": { mean: "Wish/Will", cat: "general", color: "rose" },
            "VOC": { mean: "To Call", cat: "general", color: "orange" },
            "CLAMARE": { mean: "To Shout", cat: "general", color: "pink" },
            "CEPT": { mean: "To Take", cat: "general", color: "emerald" }
        };

        const database = [
            // --- MEDICAL SESSION ---

            // PNEUMON / PULMO (Lung)
            { group: "PNEUMON", fixed: "pneumon", tar: "ia", mode: "suffix", def: "Lung inflammation (폐렴)" },
            { group: "PNEUMON", fixed: "pneumo", tar: "thorax", mode: "suffix", def: "Air in chest (기흉)" },
            { group: "PNEUMON", fixed: "pneumon", tar: "ectomy", mode: "suffix", def: "Lung removal (폐절제술)" },
            { group: "PNEUMON", fixed: "pulmon", tar: "ary", mode: "suffix", def: "Pertaining to lungs (폐의)" },
            { group: "PNEUMON", fixed: "pulmono", tar: "logist", mode: "suffix", def: "Lung specialist (호흡기내과 의사)" },

            // REN / NEPHROS (Kidney)
            { group: "REN", fixed: "ren", tar: "al", mode: "suffix", def: "Of the kidney (신장의)" },
            { group: "REN", fixed: "renal", tar: "ad", mode: "prefix", def: "Near kidney (부신의)" },
            { group: "REN", fixed: "ren", tar: "in", mode: "suffix", def: "Kidney enzyme (레닌)" },
            { group: "REN", fixed: "nephr", tar: "itis", mode: "suffix", def: "Kidney inflammation (신장염)" },
            { group: "REN", fixed: "nephr", tar: "ology", mode: "suffix", def: "Study of kidneys (신장학)" },
            { group: "REN", fixed: "nephr", tar: "on", mode: "suffix", def: "Kidney unit (네프론)" },
            { group: "REN", fixed: "nephr", tar: "ectomy", mode: "suffix", def: "Kidney removal (신장절제술)" },
            { group: "REN", fixed: "nephrosis", tar: "hydro", mode: "prefix", def: "Water in kidney (수신증)" },

            // ALGIA (Pain)
            { group: "ALGIA", fixed: "algia", tar: "neur", mode: "prefix", def: "Nerve pain (신경통)" },
            { group: "ALGIA", fixed: "algia", tar: "my", mode: "prefix", def: "Muscle pain (근육통)" },
            { group: "ALGIA", fixed: "algia", tar: "arthr", mode: "prefix", def: "Joint pain (관절통)" },
            { group: "ALGIA", fixed: "myalgia", tar: "fibro", mode: "prefix", def: "Fibrous muscle pain (섬유근육통)" },
            { group: "ALGIA", fixed: "algia", tar: "ot", mode: "prefix", def: "Ear pain (이통)" },
            { group: "ALGIA", fixed: "algia", tar: "an", mode: "prefix", def: "No pain (무통)" },

            // DYS (Bad/Difficult)
            { group: "DYS", fixed: "dys", tar: "pepsia", mode: "suffix", def: "Bad digestion (소화불량)" },
            { group: "DYS", fixed: "dys", tar: "phagia", mode: "suffix", def: "Difficulty swallowing (연하곤란)" },
            { group: "DYS", fixed: "dys", tar: "uria", mode: "suffix", def: "Painful urination (배뇨통)" },
            { group: "DYS", fixed: "dys", tar: "menorrhea", mode: "suffix", def: "Painful menstruation (월경통)" },
            { group: "DYS", fixed: "dys", tar: "trophy", mode: "suffix", def: "Bad nourishment (이영양증)" },
            { group: "DYS", fixed: "dys", tar: "plasia", mode: "suffix", def: "Bad formation (이형성증)" },

            // ECTOMY (Excision)
            { group: "ECTOMY", fixed: "ectomy", tar: "append", mode: "prefix", def: "Appendix removal (충수절제술)" },
            { group: "ECTOMY", fixed: "ectomy", tar: "tonsill", mode: "prefix", def: "Tonsil removal (편도절제술)" },
            { group: "ECTOMY", fixed: "ectomy", tar: "mast", mode: "prefix", def: "Breast removal (유방절제술)" },
            { group: "ECTOMY", fixed: "ectomy", tar: "gastr", mode: "prefix", def: "Stomach removal (위절제술)" },
            { group: "ECTOMY", fixed: "ectomy", tar: "hyster", mode: "prefix", def: "Uterus removal (자궁절제술)" },
            { group: "ECTOMY", fixed: "ectomy", tar: "thyroid", mode: "prefix", def: "Thyroid removal (갑상선절제술)" },
            { group: "ECTOMY", fixed: "ectomy", tar: "vas", mode: "prefix", def: "Vessel removal (정관수술)" },

            // OID (Form/Shape)
            { group: "OID", fixed: "oid", tar: "delt", mode: "prefix", def: "Triangle shaped (삼각근)" },
            { group: "OID", fixed: "oid", tar: "mast", mode: "prefix", def: "Breast shaped (유양돌기)" },
            { group: "OID", fixed: "oid", tar: "aden", mode: "prefix", def: "Gland like (아데노이드)" },
            { group: "OID", fixed: "oid", tar: "arachn", mode: "prefix", def: "Spider like (지주막)" },
            { group: "OID", fixed: "oid", tar: "sigm", mode: "prefix", def: "S-shaped (S상결장)" },
            { group: "OID", fixed: "oid", tar: "cortic", mode: "prefix", def: "Bark like (코르티코이드)" },
            { group: "OID", fixed: "oid", tar: "rheumat", mode: "prefix", def: "Flow like (류마티스)" },
            { group: "OID", fixed: "oid", tar: "opi", mode: "prefix", def: "Opium like (오피오이드)" },
            { group: "OID", fixed: "oid", tar: "xiph", mode: "prefix", def: "Sword like (검상돌기)" },
            { group: "OID", fixed: "oid", tar: "thyr", mode: "prefix", def: "Shield like (갑상선)" },

            // ENTERO (Intestine)
            { group: "ENTERO", fixed: "enter", tar: "itis", mode: "suffix", def: "Intestine inflammation (장염)" },
            { group: "ENTERO", fixed: "enterology", tar: "gastro", mode: "prefix", def: "Stomach and intestine (위장병학)" },
            { group: "ENTERO", fixed: "enter", tar: "ocyte", mode: "suffix", def: "Intestine cell (장세포)" },
            { group: "ENTERO", fixed: "enter", tar: "ovirus", mode: "suffix", def: "Intestine virus (엔테로바이러스)" },
            { group: "ENTERO", fixed: "entery", tar: "dys", mode: "prefix", def: "Bad intestine condition (이질)" },
            { group: "ENTERO", fixed: "entery", tar: "mes", mode: "prefix", def: "Middle intestine (장간막)" },

            // EPI (Upon/Over)
            { group: "EPI", fixed: "epi", tar: "dermis", mode: "suffix", def: "Upon skin (표피)" },
            { group: "EPI", fixed: "epi", tar: "glottis", mode: "suffix", def: "Upon tongue (후두개)" },
            { group: "EPI", fixed: "epi", tar: "nephrine", mode: "suffix", def: "Upon kidney substance (에피네프린)" },
            { group: "EPI", fixed: "epi", tar: "lepsy", mode: "suffix", def: "Seizure upon (간질)" },
            { group: "EPI", fixed: "epi", tar: "dural", mode: "suffix", def: "Upon dura mater (경막외)" },
            { group: "EPI", fixed: "epi", tar: "demic", mode: "suffix", def: "Upon people (유행병)" },

            // GASTRO (Stomach)
            { group: "GASTRO", fixed: "gastr", tar: "itis", mode: "suffix", def: "Stomach inflammation (위염)" },
            { group: "GASTRO", fixed: "gastro", tar: "scope", mode: "suffix", def: "Stomach viewer (위내시경)" },
            { group: "GASTRO", fixed: "gastro", tar: "nomy", mode: "suffix", def: "Stomach law/rule (미식학)" },
            { group: "GASTRO", fixed: "gastr", tar: "opod", mode: "suffix", def: "Stomach foot (복족류)" },

            // EMIA (Blood)
            { group: "EMIA", fixed: "emia", tar: "an", mode: "prefix", def: "No blood (binhyeol - 빈혈)" },
            { group: "EMIA", fixed: "emia", tar: "hyperglyc", mode: "prefix", def: "High blood sugar (고혈당)" },
            { group: "EMIA", fixed: "emia", tar: "hypoglyc", mode: "prefix", def: "Low blood sugar (저혈당)" },
            { group: "EMIA", fixed: "emia", tar: "leuk", mode: "prefix", def: "White blood (백혈병)" },
            { group: "EMIA", fixed: "emia", tar: "septic", mode: "prefix", def: "Infected blood (패혈증)" },
            { group: "EMIA", fixed: "emia", tar: "ur", mode: "prefix", def: "Urine in blood (요독증)" },
            { group: "EMIA", fixed: "emia", tar: "isch", mode: "prefix", def: "Holding back blood (허혈)" },

            // HEPA (Liver)
            { group: "HEPA", fixed: "hepat", tar: "itis", mode: "suffix", def: "Liver inflammation (간염)" },
            { group: "HEPA", fixed: "hepat", tar: "ocyte", mode: "suffix", def: "Liver cell (간세포)" },
            { group: "HEPA", fixed: "hepat", tar: "ology", mode: "suffix", def: "Study of liver (간학)" },
            { group: "HEPA", fixed: "hepat", tar: "omegaly", mode: "suffix", def: "Large liver (간비대)" },
            { group: "HEPA", fixed: "hepat", tar: "otoxin", mode: "suffix", def: "Liver poison (간독소)" },

            // HYDRO (Water)
            { group: "HYDRO", fixed: "hydro", tar: "cephalus", mode: "suffix", def: "Water in head (수두증)" },
            { group: "HYDRO", fixed: "hydro", tar: "nephrosis", mode: "suffix", def: "Water in kidney (수신증)" },
            { group: "HYDRO", fixed: "hydro", tar: "cortisone", mode: "suffix", def: "Water hormone (하이드로코르티손)" },
            { group: "HYDRO", fixed: "hydro", tar: "phobia", mode: "suffix", def: "Fear of water (공수병)" },
            { group: "HYDRO", fixed: "hydro", tar: "therapy", mode: "suffix", def: "Water treatment (수치료)" },
            { group: "HYDRO", fixed: "hydro", tar: "lysis", mode: "suffix", def: "Water breakdown (가수분해)" },

            // ITIS (Inflammation)
            { group: "ITIS", fixed: "itis", tar: "arthr", mode: "prefix", def: "Joint inflammation (관절염)" },
            { group: "ITIS", fixed: "itis", tar: "bronch", mode: "prefix", def: "Bronchus inflammation (기관지염)" },
            { group: "ITIS", fixed: "itis", tar: "dermat", mode: "prefix", def: "Skin inflammation (피부염)" },
            { group: "ITIS", fixed: "itis", tar: "gastr", mode: "prefix", def: "Stomach inflammation (위염)" },
            { group: "ITIS", fixed: "itis", tar: "hepat", mode: "prefix", def: "Liver inflammation (간염)" },
            { group: "ITIS", fixed: "itis", tar: "nephr", mode: "prefix", def: "Kidney inflammation (신장염)" },
            { group: "ITIS", fixed: "itis", tar: "ot", mode: "prefix", def: "Ear inflammation (중이염)" },
            { group: "ITIS", fixed: "itis", tar: "pharyng", mode: "prefix", def: "Throat inflammation (인두염)" },
            { group: "ITIS", fixed: "itis", tar: "sinus", mode: "prefix", def: "Sinus inflammation (축농증)" },
            { group: "ITIS", fixed: "itis", tar: "tonsill", mode: "prefix", def: "Tonsil inflammation (편도선염)" },

            // CARDIA (Heart)
            { group: "CARDIA", fixed: "cardial", tar: "myo", mode: "prefix", def: "Heart muscle (심근의)" },
            { group: "CARDIA", fixed: "cardi", tar: "ology", mode: "suffix", def: "Study of heart (심장학)" },
            { group: "CARDIA", fixed: "cardi", tar: "ac", mode: "suffix", def: "Pertaining to heart (심장의)" },
            { group: "CARDIA", fixed: "cardium", tar: "myo", mode: "prefix", def: "Muscle of heart (심근)" },
            { group: "CARDIA", fixed: "cardium", tar: "peri", mode: "prefix", def: "Around heart (심낭)" },
            { group: "CARDIA", fixed: "cardia", tar: "tachy", mode: "prefix", def: "Fast heart (빈맥)" },
            { group: "CARDIA", fixed: "cardia", tar: "brady", mode: "prefix", def: "Slow heart (서맥)" },

            // LYSIS (Destruction)
            { group: "LYSIS", fixed: "lysis", tar: "hemo", mode: "prefix", def: "Blood destruction (용혈)" },
            { group: "LYSIS", fixed: "lysis", tar: "dia", mode: "prefix", def: "Through separation (투석)" },
            { group: "LYSIS", fixed: "lysis", tar: "auto", mode: "prefix", def: "Self destruction (자가융해)" },
            { group: "LYSIS", fixed: "lysis", tar: "thrombo", mode: "prefix", def: "Clot destruction (혈전용해)" },
            { group: "LYSIS", fixed: "lysis", tar: "cyto", mode: "prefix", def: "Cell destruction (세포용해)" },
            { group: "LYSIS", fixed: "lysis", tar: "lipo", mode: "prefix", def: "Fat destruction (지방분해)" },
            { group: "LYSIS", fixed: "lysis", tar: "glyco", mode: "prefix", def: "Sugar breakdown (당분해)" },

            // OMA (Tumor)
            { group: "OMA", fixed: "noma", tar: "carci", mode: "prefix", def: "Cancerous tumor (암종)" }, // carci-noma
            { group: "OMA", fixed: "oma", tar: "sarc", mode: "prefix", def: "Flesh tumor (육종)" },
            { group: "OMA", fixed: "oma", tar: "aden", mode: "prefix", def: "Gland tumor (선종)" },
            { group: "OMA", fixed: "oma", tar: "lip", mode: "prefix", def: "Fat tumor (지방종)" },
            { group: "OMA", fixed: "oma", tar: "my", mode: "prefix", def: "Muscle tumor (근종)" },
            { group: "OMA", fixed: "oma", tar: "melan", mode: "prefix", def: "Black tumor (흑색종)" },
            { group: "OMA", fixed: "oma", tar: "lymph", mode: "prefix", def: "Lymph tumor (림프종)" },
            { group: "OMA", fixed: "oma", tar: "papill", mode: "prefix", def: "Nipple-like tumor (유두종)" },

            // URIA (Urine)
            { group: "URIA", fixed: "uria", tar: "olig", mode: "prefix", def: "Scanty urine (핍뇨)" },
            { group: "URIA", fixed: "uria", tar: "poly", mode: "prefix", def: "Much urine (다뇨)" },
            { group: "URIA", fixed: "uria", tar: "an", mode: "prefix", def: "No urine (무뇨)" },
            { group: "URIA", fixed: "uria", tar: "noct", mode: "prefix", def: "Night urine (야뇨)" },
            { group: "URIA", fixed: "uria", tar: "dys", mode: "prefix", def: "Painful urine (배뇨통)" },
            { group: "URIA", fixed: "uria", tar: "hemat", mode: "prefix", def: "Blood in urine (혈뇨)" },
            { group: "URIA", fixed: "uria", tar: "protein", mode: "prefix", def: "Protein in urine (단백뇨)" },
            { group: "URIA", fixed: "uria", tar: "glycos", mode: "prefix", def: "Sugar in urine (당뇨)" },
            { group: "URIA", fixed: "uria", tar: "py", mode: "prefix", def: "Pus in urine (농뇨)" },

            // PARA (Beside)
            { group: "PARA", fixed: "para", tar: "site", mode: "suffix", def: "Eat beside (기생충)" },
            { group: "PARA", fixed: "para", tar: "noia", mode: "suffix", def: "Mind beside (망상)" }, // para-noia
            { group: "PARA", fixed: "para", tar: "plegic", mode: "suffix", def: "Stroke beside (하반신마비)" },
            { group: "PARA", fixed: "para", tar: "mnesia", mode: "suffix", def: "Memory beside (기억착오)" },
            { group: "PARA", fixed: "para", tar: "somnia", mode: "suffix", def: "Sleep beside (수면장애)" },
            { group: "PARA", fixed: "para", tar: "thyroid", mode: "suffix", def: "Beside thyroid (부갑상선)" },

            // PERI (Around)
            { group: "PERI", fixed: "peri", tar: "cardium", mode: "suffix", def: "Around heart (심낭)" },
            { group: "PERI", fixed: "peri", tar: "osteum", mode: "suffix", def: "Around bone (골막)" },
            { group: "PERI", fixed: "peri", tar: "natal", mode: "suffix", def: "Around birth (주산기)" },
            { group: "PERI", fixed: "peri", tar: "orbital", mode: "suffix", def: "Around eye (안와위)" },
            { group: "PERI", fixed: "peri", tar: "toneum", mode: "suffix", def: "Around stretch (복막)" },

            // PLASIA (Formation)
            { group: "PLASIA", fixed: "plasia", tar: "hyper", mode: "prefix", def: "Over formation (과형성)" },
            { group: "PLASIA", fixed: "plasia", tar: "hypo", mode: "prefix", def: "Under formation (저형성)" },
            { group: "PLASIA", fixed: "plasia", tar: "dys", mode: "prefix", def: "Bad formation (이형성)" },
            { group: "PLASIA", fixed: "plasia", tar: "a", mode: "prefix", def: "No formation (무형성)" },
            { group: "PLASIA", fixed: "plasia", tar: "neo", mode: "prefix", def: "New formation (종양)" },

            // RRHEA (Flow)
            { group: "RRHEA", fixed: "rrhea", tar: "dia", mode: "prefix", def: "Flow through (설사)" },
            { group: "RRHEA", fixed: "rrhea", tar: "rhino", mode: "prefix", def: "Nose flow (콧물)" },
            { group: "RRHEA", fixed: "rrhea", tar: "galacto", mode: "prefix", def: "Milk flow (유즙누출)" },
            { group: "RRHEA", fixed: "rrhea", tar: "leuko", mode: "prefix", def: "White flow (백대하)" },
            { group: "RRHEA", fixed: "rrhea", tar: "oto", mode: "prefix", def: "Ear flow (이루)" },

            // SCOPE (View)
            { group: "SCOPE", fixed: "scope", tar: "endo", mode: "prefix", def: "Inside viewer (내시경)" },
            { group: "SCOPE", fixed: "scope", tar: "arthro", mode: "prefix", def: "Joint viewer (관절경)" },
            { group: "SCOPE", fixed: "scope", tar: "fluoro", mode: "prefix", def: "Flow viewer (투시경)" },
            { group: "SCOPE", fixed: "scope", tar: "stetho", mode: "prefix", def: "Chest viewer (청진기)" },
            { group: "SCOPE", fixed: "scope", tar: "gastro", mode: "prefix", def: "Stomach viewer (위내시경)" },
            { group: "SCOPE", fixed: "scope", tar: "colo", mode: "prefix", def: "Colon viewer (대장내시경)" }, // colonoscope -> colono-scope

            // TOMY (Incision)
            { group: "TOMY", fixed: "tomy", tar: "ana", mode: "prefix", def: "Cut up (해부학)" },
            { group: "TOMY", fixed: "tomy", tar: "phlebo", mode: "prefix", def: "Vein cut (정맥절개)" },
            { group: "TOMY", fixed: "tomy", tar: "tracheo", mode: "prefix", def: "Windpipe cut (기관절개)" },
            { group: "TOMY", fixed: "tomy", tar: "lobo", mode: "prefix", def: "Lobe cut (엽절제)" },
            { group: "TOMY", fixed: "tomy", tar: "cranio", mode: "prefix", def: "Skull cut (개두술)" },
            { group: "TOMY", fixed: "tomy", tar: "laparo", mode: "prefix", def: "Abdomen cut (복부절개)" },

            // TROPHY (Nourishment)
            { group: "TROPHY", fixed: "trophy", tar: "a", mode: "prefix", def: "No nourishment (위축)" },
            { group: "TROPHY", fixed: "trophy", tar: "hyper", mode: "prefix", def: "Over nourishment (비대)" },
            { group: "TROPHY", fixed: "trophy", tar: "dys", mode: "prefix", def: "Bad nourishment (이영양증)" },

            // GRAPH (Write/Record)
            { group: "GRAPH", fixed: "graphy", tar: "tomo", mode: "prefix", def: "Slice recording (단층촬영)" },
            { group: "GRAPH", fixed: "graphy", tar: "angio", mode: "prefix", def: "Vessel recording (혈관조영)" },
            { group: "GRAPH", fixed: "graphy", tar: "mammo", mode: "prefix", def: "Breast recording (유방촬영)" },
            { group: "GRAPH", fixed: "graphy", tar: "radio", mode: "prefix", def: "Ray recording (방사선촬영)" },
            { group: "GRAPH", fixed: "graphy", tar: "thermo", mode: "prefix", def: "Heat recording (적외선체열촬영)" },

            // --- GENERAL SESSION ---

            // SIGHT (See)
            { group: "SIGHT", fixed: "sight", tar: "fore", mode: "prefix", def: "Seeing beforehand (선견지명)" },
            { group: "SIGHT", fixed: "sight", tar: "hind", mode: "prefix", def: "Seeing behind (뒤늦은 깨달음)" },
            { group: "SIGHT", fixed: "sight", tar: "in", mode: "prefix", def: "Seeing into (통찰력)" },
            { group: "SIGHT", fixed: "sight", tar: "over", mode: "prefix", def: "Seeing over (간과/감독)" },
            { group: "SIGHT", fixed: "sight", tar: "blind", mode: "prefix", def: "Blind seeing (맹시)" },

            // CISIONE (Cut)
            { group: "CISIONE", fixed: "cision", tar: "in", mode: "prefix", def: "Cut into (절개)" },
            { group: "CISIONE", fixed: "cision", tar: "ex", mode: "prefix", def: "Cut out (적출)" },
            { group: "CISIONE", fixed: "cision", tar: "pre", mode: "prefix", def: "Cut before (정밀)" },
            { group: "CISIONE", fixed: "cision", tar: "de", mode: "prefix", def: "Cut away (결정)" },
            { group: "CISIONE", fixed: "cision", tar: "circum", mode: "prefix", def: "Cut around (포경수술)" },

            // CIRCUM (Around)
            { group: "CIRCUM", fixed: "circum", tar: "ference", mode: "suffix", def: "Carry around (원둘레)" },
            { group: "CIRCUM", fixed: "circum", tar: "stance", mode: "suffix", def: "Stand around (상황)" },
            { group: "CIRCUM", fixed: "circum", tar: "navigate", mode: "suffix", def: "Sail around (세계일주)" },
            { group: "CIRCUM", fixed: "circum", tar: "vent", mode: "suffix", def: "Come around (우회하다)" },
            { group: "CIRCUM", fixed: "circum", tar: "scribe", mode: "suffix", def: "Write around (제한하다)" },
            { group: "CIRCUM", fixed: "circum", tar: "spect", mode: "suffix", def: "Look around (신중한)" },

            // FERRE (Carry) - Existing + New
            { group: "FERRE", fixed: "ference", tar: "con", mode: "prefix", def: "Bring together (회의)" }, // Conference
            { group: "FERRE", fixed: "ference", tar: "dif", mode: "prefix", def: "Carry apart (차이)" }, // Difference
            { group: "FERRE", fixed: "ference", tar: "in", mode: "prefix", def: "Bring in (추론)" }, // Inference
            { group: "FERRE", fixed: "ference", tar: "re", mode: "prefix", def: "Bring back (참조)" }, // Reference
            { group: "FERRE", fixed: "ference", tar: "pre", mode: "prefix", def: "Carry before (선호)" }, // Preference
            { group: "FERRE", fixed: "ference", tar: "de", mode: "prefix", def: "Bring down (존중)" }, // Deference - wait defer? yes.
            { group: "FERRE", fixed: "ference", tar: "inter", mode: "prefix", def: "Carry between (방해)" }, // Interference
            { group: "FERRE", fixed: "ference", tar: "trans", mode: "prefix", def: "Carry across (전이)" }, // Transference

            // GRESS (Go)
            { group: "GRESS", fixed: "gress", tar: "pro", mode: "prefix", def: "Go forward (진보)" },
            { group: "GRESS", fixed: "gress", tar: "re", mode: "prefix", def: "Go back (퇴보)" },
            { group: "GRESS", fixed: "grade", tar: "retro", mode: "prefix", def: "Go backward (역행)" },
            { group: "GRESS", fixed: "gress", tar: "trans", mode: "prefix", def: "Go across (위반하다)" },
            { group: "GRESS", fixed: "gress", tar: "di", mode: "prefix", def: "Go apart (벗어나다)" },
            { group: "GRESS", fixed: "gress", tar: "e", mode: "prefix", def: "Go out (출구)" },
            { group: "GRESS", fixed: "gress", tar: "in", mode: "prefix", def: "Go in (입구/진입)" },
            { group: "GRESS", fixed: "gress", tar: "con", mode: "prefix", def: "Go together (의회)" },
            { group: "GRESS", fixed: "gress", tar: "ag", mode: "prefix", def: "Go toward (공격)" },

            // LOQUI (Speak)
            { group: "LOQUI", fixed: "loqu", tar: "acious", mode: "suffix", def: "Full of speak (수다스러운)" },
            { group: "LOQUI", fixed: "loquent", tar: "e", mode: "prefix", def: "Speak out (웅변의)" }, // Eloquent
            { group: "LOQUI", fixed: "loquial", tar: "col", mode: "prefix", def: "Speak together (구어체의)" }, // Colloquial
            { group: "LOQUI", fixed: "loquy", tar: "soli", mode: "prefix", def: "Speak alone (독백)" }, // Soliloquy
            { group: "LOQUI", fixed: "loquist", tar: "ventri", mode: "prefix", def: "Belly speak (복화술)" }, // Ventriloquist
            { group: "LOQUI", fixed: "locution", tar: "circum", mode: "prefix", def: "Speak around (에둘러 말하기)" }, // Circumlocution
            { group: "LOQUI", fixed: "locution", tar: "e", mode: "prefix", def: "Speak out (연설 태도)" }, // Elocution

            // MALE (Bad)
            { group: "MALE", fixed: "mal", tar: "formation", mode: "suffix", def: "Bad formation (기형)" },
            { group: "MALE", fixed: "mal", tar: "function", mode: "suffix", def: "Bad function (오작동)" },
            { group: "MALE", fixed: "mal", tar: "nutrition", mode: "suffix", def: "Bad nutrition (영양실조)" },
            { group: "MALE", fixed: "mal", tar: "aria", mode: "suffix", def: "Bad air (말라리아)" }, // Malaria
            { group: "MALE", fixed: "mal", tar: "odor", mode: "suffix", def: "Bad smell (악취)" },

            // META (Beyond/Change)
            { group: "META", fixed: "meta", tar: "carpal", mode: "suffix", def: "Beyond wrist (중수골)" },
            { group: "META", fixed: "meta", tar: "tarsal", mode: "suffix", def: "Beyond ankle (중족골)" },
            { group: "META", fixed: "meta", tar: "morphosis", mode: "suffix", def: "Change form (변태)" },
            { group: "META", fixed: "meta", tar: "stasis", mode: "suffix", def: "Change standing (전이)" },
            { group: "META", fixed: "meta", tar: "bolism", mode: "suffix", def: "Change throw (대사)" },
            { group: "META", fixed: "meta", tar: "physics", mode: "suffix", def: "Beyond nature (형이상학)" },

            // MISSION (Send)
            { group: "MISSION", fixed: "mission", tar: "re", mode: "prefix", def: "Send back (관해/차도)" },
            { group: "MISSION", fixed: "mission", tar: "sub", mode: "prefix", def: "Send under (제출/복종)" },
            { group: "MISSION", fixed: "mission", tar: "trans", mode: "prefix", def: "Send across (전송)" },
            { group: "MISSION", fixed: "mission", tar: "e", mode: "prefix", def: "Send out (배출)" },
            { group: "MISSION", fixed: "mission", tar: "ad", mode: "prefix", def: "Send to (입장)" },
            { group: "MISSION", fixed: "mission", tar: "inter", mode: "prefix", def: "Send between (휴식 시간)" },
            { group: "MISSION", fixed: "mission", tar: "per", mode: "prefix", def: "Send through (허가)" },

            // MORPH (Form)
            { group: "MORPH", fixed: "morph", tar: "ine", mode: "suffix", def: "Form drug (모르핀)" }, // Morpheus
            { group: "MORPH", fixed: "morph", tar: "ology", mode: "suffix", def: "Study of form (형태학)" },
            { group: "MORPH", fixed: "morph", tar: "poly", mode: "prefix", def: "Many forms (다형성)" },
            { group: "MORPH", fixed: "morph", tar: "a", mode: "prefix", def: "No form (무정형)" },

            // RECT (Straight/Lead)
            { group: "RECT", fixed: "rect", tar: "e", mode: "prefix", def: "Lead out (세우다/발기)" }, // Erect
            { group: "RECT", fixed: "rect", tar: "cor", mode: "prefix", def: "Lead with (수정하다)" }, // Correct
            { group: "RECT", fixed: "rect", tar: "di", mode: "prefix", def: "Lead apart (지시하다)" }, // Direct
            { group: "RECT", fixed: "rect", tar: "ify", mode: "suffix", def: "Make straight (바로잡다)" }, // Rectify
            { group: "RECT", fixed: "rect", tar: "angle", mode: "suffix", def: "Straight angle (직사각형)" },

            // SCRIBE (Write)
            { group: "SCRIBE", fixed: "scribe", tar: "pre", mode: "prefix", def: "Write before (처방하다)" },
            { group: "SCRIBE", fixed: "scribe", tar: "pro", mode: "prefix", def: "Write forward (금지하다)" },
            { group: "SCRIBE", fixed: "script", tar: "post", mode: "prefix", def: "Write after (추신)" },
            { group: "SCRIBE", fixed: "scribe", tar: "in", mode: "prefix", def: "Write into (새기다)" },
            { group: "SCRIBE", fixed: "scribe", tar: "sub", mode: "prefix", def: "Write under (구독하다)" },
            { group: "SCRIBE", fixed: "scribe", tar: "de", mode: "prefix", def: "Write down (묘사하다)" },
            { group: "SCRIBE", fixed: "scribe", tar: "tran", mode: "prefix", def: "Write across (필사하다)" },

            // SOMNI (Sleep)
            { group: "SOMNI", fixed: "somnia", tar: "para", mode: "prefix", def: "Sleep beside/abnormal (사건수면)" },
            { group: "SOMNI", fixed: "somnia", tar: "dys", mode: "prefix", def: "Bad sleep (수면장애)" },
            { group: "SOMNI", fixed: "somnia", tar: "in", mode: "prefix", def: "No sleep (불면증)" },
            { group: "SOMNI", fixed: "somni", tar: "loquy", mode: "suffix", def: "Sleep talking (잠꼬대)" },
            { group: "SOMNI", fixed: "somn", tar: "ambulism", mode: "suffix", def: "Sleep walking (몽유병)" },
            { group: "SOMNI", fixed: "somni", tar: "ferous", mode: "suffix", def: "Sleep bearing (졸리게 하는)" },

            // SPECT (Look)
            { group: "SPECT", fixed: "spect", tar: "ator", mode: "suffix", def: "Looker (관중)" },
            { group: "SPECT", fixed: "spect", tar: "in", mode: "prefix", def: "Look into (조사하다)" },
            { group: "SPECT", fixed: "spect", tar: "re", mode: "prefix", def: "Look back/again (존경하다)" },
            { group: "SPECT", fixed: "spective", tar: "per", mode: "prefix", def: "Look through (관점)" }, // Perspective
            { group: "SPECT", fixed: "spect", tar: "retro", mode: "prefix", def: "Look backward (회고)" },
            { group: "SPECT", fixed: "spect", tar: "pro", mode: "prefix", def: "Look forward (전망)" },

            // SPIRE (Breathe)
            { group: "SPIRE", fixed: "piration", tar: "ex", mode: "prefix", def: "Breathe out (만료되다/죽다)" },
            { group: "SPIRE", fixed: "spire", tar: "in", mode: "prefix", def: "Breathe in (영감을 주다)" },
            { group: "SPIRE", fixed: "spire", tar: "re", mode: "prefix", def: "Breathe again (호흡하다)" },
            { group: "SPIRE", fixed: "spire", tar: "per", mode: "prefix", def: "Breathe through (땀을 흘리다)" },
            { group: "SPIRE", fixed: "spire", tar: "a", mode: "prefix", def: "Breathe toward (열망하다)" }, // Aspire
            { group: "SPIRE", fixed: "spire", tar: "con", mode: "prefix", def: "Breathe together (공모하다)" },

            // TEST (Witness)
            { group: "TEST", fixed: "test", tar: "ify", mode: "suffix", def: "Make witness (증언하다)" },
            { group: "TEST", fixed: "test", tar: "imony", mode: "suffix", def: "State of witness (증언)" },
            { group: "TEST", fixed: "test", tar: "ament", mode: "suffix", def: "Result of witness (성서/유언)" },
            { group: "TEST", fixed: "test", tar: "at", mode: "prefix", def: "Witness to (증명하다)" }, // Attest
            { group: "TEST", fixed: "test", tar: "con", mode: "prefix", def: "Witness together (경연/다투다)" }, // Contest
            { group: "TEST", fixed: "test", tar: "de", mode: "prefix", def: "Witness down (혐오하다)" }, // Detest
            { group: "TEST", fixed: "test", tar: "pro", mode: "prefix", def: "Witness forward (항의하다)" },

            // TRANS (Across)
            { group: "TRANS", fixed: "trans", tar: "fer", mode: "suffix", def: "Carry across (이전하다)" },
            { group: "TRANS", fixed: "trans", tar: "plant", mode: "suffix", def: "Plant across (이식하다)" },
            { group: "TRANS", fixed: "trans", tar: "fusion", mode: "suffix", def: "Pour across (수혈)" },
            { group: "TRANS", fixed: "trans", tar: "form", mode: "suffix", def: "Shape across (변형시키다)" },
            { group: "TRANS", fixed: "trans", tar: "port", mode: "suffix", def: "Carry across (수송하다)" },
            { group: "TRANS", fixed: "trans", tar: "parent", mode: "suffix", def: "Appear across (투명한)" },

            // VOL (Wish/Will)
            { group: "VOL", fixed: "vol", tar: "ition", mode: "suffix", def: "Act of willing (의지)" },
            { group: "VOL", fixed: "vol", tar: "unteer", mode: "suffix", def: "One who wills (자원봉사자)" },
            { group: "VOL", fixed: "vol", tar: "untary", mode: "suffix", def: "Relating to will (자발적인)" },
            { group: "VOL", fixed: "volent", tar: "bene", mode: "prefix", def: "Well wishing (자비로운)" },
            { group: "VOL", fixed: "volent", tar: "male", mode: "prefix", def: "Bad wishing (악의적인)" },

            // VOC (Call)
            { group: "VOC", fixed: "voc", tar: "al", mode: "suffix", def: "Relating to voice (목소리의)" },
            { group: "VOC", fixed: "voc", tar: "ation", mode: "suffix", def: "Calling (직업/천직)" },
            { group: "VOC", fixed: "voke", tar: "e", mode: "prefix", def: "Call out (불러일으키다)" }, // Evoke
            { group: "VOC", fixed: "voke", tar: "pro", mode: "prefix", def: "Call forward (자극하다)" }, // Provoke
            { group: "VOC", fixed: "voke", tar: "re", mode: "prefix", def: "Call back (취소하다)" }, // Revoke
            { group: "VOC", fixed: "vocate", tar: "ad", mode: "prefix", def: "Call to (옹호하다)" }, // Advocate
            { group: "VOC", fixed: "voke", tar: "in", mode: "prefix", def: "Call in (호소하다)" }, // Invoke

            // CLAMARE (Shout)
            { group: "CLAMARE", fixed: "clamation", tar: "pro", mode: "prefix", def: "Shout forward (선언/포고)" },
            { group: "CLAMARE", fixed: "clamation", tar: "ac", mode: "prefix", def: "Shout toward (환호/갈채)" },
            { group: "CLAMARE", fixed: "clamation", tar: "de", mode: "prefix", def: "Shout down (웅변/열변)" },
            { group: "CLAMARE", fixed: "clamation", tar: "ex", mode: "prefix", def: "Shout out (외침/감탄)" },
            { group: "CLAMARE", fixed: "clamation", tar: "re", mode: "prefix", def: "Shout back/again (되찾음/간척)" },

            // CEPT (Take)
            { group: "CEPT", fixed: "cept", tar: "ac", mode: "prefix", def: "Take toward (수락하다)" },
            { group: "CEPT", fixed: "cept", tar: "inter", mode: "prefix", def: "Take between (가로채다)" },
            { group: "CEPT", fixed: "cept", tar: "con", mode: "prefix", def: "Take together (개념)" },
            { group: "CEPT", fixed: "cept", tar: "ex", mode: "prefix", def: "Take out (제외하다)" },
            { group: "CEPT", fixed: "cept", tar: "per", mode: "prefix", def: "Take through (인지/지각)" },

            // JECT & TRACT & DUCT & AUDI & VIS (Already in General)
            { group: "JECT", fixed: "ject", tar: "in", mode: "prefix", def: "Throw in (주사하다)" },
            { group: "JECT", fixed: "ject", tar: "re", mode: "prefix", def: "Throw back (거절하다)" },
            { group: "JECT", fixed: "ject", tar: "pro", mode: "prefix", def: "Throw forward (계획하다/투사하다)" },
            { group: "JECT", fixed: "ject", tar: "e", mode: "prefix", def: "Throw out (내쫓다)" },

            { group: "TRACT", fixed: "tract", tar: "at", mode: "prefix", def: "Draw to (매혹하다)" },
            { group: "TRACT", fixed: "tract", tar: "con", mode: "prefix", def: "Draw together (계약하다/수축하다)" },
            { group: "TRACT", fixed: "tract", tar: "ex", mode: "prefix", def: "Draw out (추출하다)" },
            { group: "TRACT", fixed: "trac", tar: "tion", mode: "suffix", def: "Drawing act (견인)" },
            { group: "TRACT", fixed: "tract", tar: "or", mode: "suffix", def: "Thing that pulls (트랙터)" },
            { group: "TRACT", fixed: "tract", tar: "sub", mode: "prefix", def: "Draw under/away (빼다)" },

            { group: "DUCT", fixed: "duct", tar: "con", mode: "prefix", def: "Lead together (전도하다)" },
            { group: "DUCT", fixed: "duct", tar: "pro", mode: "prefix", def: "Lead forward (생산품)" },
            { group: "DUCT", fixed: "duction", tar: "intro", mode: "prefix", def: "Lead within (소개하다)" },
            { group: "DUCT", fixed: "duct", tar: "ab", mode: "prefix", def: "Lead away (유괴하다)" },
            { group: "DUCT", fixed: "duct", tar: "de", mode: "prefix", def: "Lead down (공제하다)" },

            { group: "AUDI", fixed: "audi", tar: "ence", mode: "suffix", def: "Listening group (청중)" },
            { group: "AUDI", fixed: "audi", tar: "ble", mode: "suffix", def: "Able to hear (잘 들리는)" },
            { group: "AUDI", fixed: "audi", tar: "torium", mode: "suffix", def: "Place for hearing (강당)" },
            { group: "AUDI", fixed: "audi", tar: "tion", mode: "suffix", def: "Hearing test (오디션)" },

            { group: "VIS", fixed: "vis", tar: "ion", mode: "suffix", def: "Act of seeing (시력/비전)" },
            { group: "VIS", fixed: "vis", tar: "ible", mode: "suffix", def: "Able to see (보이는)" },
            { group: "VIS", fixed: "vis", tar: "it", mode: "suffix", def: "Go to see (방문하다)" },
            { group: "VIS", fixed: "vis", tar: "or", mode: "suffix", def: "Thing that protects sight (햇빛 가리개)" },
            { group: "VIS", fixed: "vis", tar: "ta", mode: "suffix", def: "View (경치/전망)" },
        ];

        // --- STATE ---
        let currentQuestions = [];
        let currentIndex = 0;
        let userInput = "";
        let isAnimating = false;
        let gameResults = [];
        let hintsRemaining = 3;
        let activeTab = 'medical';
        let mistakes = 0;
        const MAX_MISTAKES = 3;

        // --- DOM ELEMENTS ---
        const viewMenu = document.getElementById('menu-view');
        const viewGame = document.getElementById('game-view');
        const viewResult = document.getElementById('result-view');
        const elRootHint = document.getElementById('root-hint');
        const elContainer = document.getElementById('letters-container');
        const elMsg = document.getElementById('message-area');
        const elCurrentCount = document.getElementById('current-count');
        const elTotalCount = document.getElementById('total-count');
        const elProgress = document.getElementById('progress-container');
        const elResultList = document.getElementById('result-list');
        const elScoreDisplay = document.getElementById('score-display');
        const elHintCount = document.getElementById('hint-count');
        const btnHint = document.getElementById('btn-hint');
        const elDef = document.getElementById('definition-text');
        const elWordContainer = document.getElementById('word-container');
        const elFixedPart = document.getElementById('fixed-part');
        const elInputPart = document.getElementById('input-part');
        const elGridMedical = document.getElementById('grid-medical');
        const elGridGeneral = document.getElementById('grid-general');
        const elTabMedical = document.getElementById('tab-medical');
        const elTabGeneral = document.getElementById('tab-general');
        const elLivesContainer = document.getElementById('lives-container');

        // --- SOUND ENGINE ---
        const AudioContext = window.AudioContext || window.webkitAudioContext;
        let audioCtx;
        function initAudio() {
            if (!audioCtx) audioCtx = new AudioContext();
            if (audioCtx.state === 'suspended') audioCtx.resume();
        }
        function playSound(freq, type, duration, startTime = 0, volume = 0.1) {
            initAudio();
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.type = type;
            osc.frequency.setValueAtTime(freq, audioCtx.currentTime + startTime);
            gain.gain.setValueAtTime(0, audioCtx.currentTime + startTime);
            gain.gain.linearRampToValueAtTime(volume, audioCtx.currentTime + startTime + 0.05);
            gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + startTime + duration);
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            osc.start(audioCtx.currentTime + startTime);
            osc.stop(audioCtx.currentTime + startTime + duration);
        }
        function playChord(notes, type = 'sine', duration = 0.5) {
            notes.forEach((freq, index) => playSound(freq, type, duration, index * 0.05));
        }

        function sfxCorrect() { playChord([523.25, 659.25, 783.99, 1046.50], 'triangle', 0.6); }
        function sfxWrong() {
            initAudio();
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.type = 'sawtooth';
            osc.frequency.setValueAtTime(150, audioCtx.currentTime);
            osc.frequency.exponentialRampToValueAtTime(50, audioCtx.currentTime + 0.4);
            gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
            gain.gain.linearRampToValueAtTime(0, audioCtx.currentTime + 0.4);
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            osc.start();
            osc.stop(audioCtx.currentTime + 0.4);
        }
        function sfxClick() { playSound(800, 'sine', 0.05, 0, 0.05); }
        function sfxHint() { playChord([1200, 1600], 'sine', 0.3); }
        function sfxWin() {
            const seq = [{ f: 523, t: 0 }, { f: 523, t: 0.15 }, { f: 523, t: 0.3 }, { f: 659, t: 0.5 }, { f: 783, t: 0.9 }, { f: 1046, t: 0.9 }];
            seq.forEach(n => playSound(n.f, 'square', 0.4, n.t, 0.1));
        }

        // --- LOGIC ---

        function initMenu() {
            elGridMedical.innerHTML = '';
            elGridGeneral.innerHTML = '';

            // Count words per group
            const groupCounts = {};
            database.forEach(q => {
                groupCounts[q.group] = (groupCounts[q.group] || 0) + 1;
            });

            for (const [key, data] of Object.entries(rootData)) {
                // Determine color based on word count
                const count = groupCounts[key] || 0;
                let btnColor = "slate"; // default fallback
                if (count <= 3) {
                    btnColor = "yellow";
                } else if (count === 4) {
                    btnColor = "green";
                } else if (count === 5) {
                    btnColor = "blue";
                } else if (count === 6) {
                    btnColor = "purple";
                } else {
                    btnColor = "red";
                }

                const btn = document.createElement('button');
                btn.className = `p-4 bg-${btnColor}-50 hover:bg-${btnColor}-100 text-${btnColor}-700 rounded-2xl font-bold border-2 border-${btnColor}-100 hover:border-${btnColor}-300 transition-all flex flex-col items-center gap-1 group`;
                btn.onclick = () => startGame(key);
                btn.innerHTML = `
                    <span class="text-xl group-hover:scale-110 transition-transform">${key}${key.endsWith('-') ? '' : '-'}</span>
                    <span class="text-[10px] uppercase font-bold text-${btnColor}-400 text-center leading-tight">${data.mean}</span>
                `;

                if (data.cat === 'medical') {
                    elGridMedical.appendChild(btn);
                } else {
                    elGridGeneral.appendChild(btn);
                }
            }
        }

        function switchTab(tab) {
            activeTab = tab;
            if (tab === 'medical') {
                elTabMedical.className = "flex-1 py-2 rounded-xl font-bold text-sm transition-colors bg-blue-600 text-white shadow-md";
                elTabGeneral.className = "flex-1 py-2 rounded-xl font-bold text-sm transition-colors bg-slate-200 text-slate-500 hover:bg-slate-300";
                elGridMedical.classList.remove('hidden');
                elGridGeneral.classList.add('hidden');
            } else {
                elTabGeneral.className = "flex-1 py-2 rounded-xl font-bold text-sm transition-colors bg-blue-600 text-white shadow-md";
                elTabMedical.className = "flex-1 py-2 rounded-xl font-bold text-sm transition-colors bg-slate-200 text-slate-500 hover:bg-slate-300";
                elGridGeneral.classList.remove('hidden');
                elGridMedical.classList.add('hidden');
            }
        }

        function showMenu() {
            viewMenu.classList.remove('hidden');
            viewGame.classList.add('hidden');
            viewResult.classList.add('hidden');
            elProgress.classList.add('hidden');
            elMsg.style.transform = "translateY(100%)";

            // Re-init menu if needed or just switch tab
            // initMenu(); // Call once at startup
        }

        function startGame(rootGroup) {
            initAudio();
            currentQuestions = database.filter(q => q.group === rootGroup);
            currentQuestions.sort(() => Math.random() - 0.5);

            if (currentQuestions.length === 0) {
                alert("No data available for " + rootGroup);
                return;
            }

            currentIndex = 0;
            gameResults = [];
            hintsRemaining = 3;
            mistakes = 0;
            updateLivesUI();

            viewMenu.classList.add('hidden');
            viewGame.classList.remove('hidden');
            elProgress.classList.remove('hidden');
            elTotalCount.innerText = currentQuestions.length;
            elLivesContainer.classList.remove('hidden');
            loadQuestion(0);
        }

        // Load menu on start
        initMenu();


        function updateLivesUI() {
            let html = '';
            for (let i = 0; i < MAX_MISTAKES; i++) {
                if (i < MAX_MISTAKES - mistakes) {
                    html += `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="#ef4444" stroke="#ef4444" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-3.5 h-3.5 text-red-500 transition-all duration-300"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></svg>`; // Filled Heart
                } else {
                    html += `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-3.5 h-3.5 text-slate-600 transition-all duration-300"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></svg>`; // Empty Heart
                }
            }
            elLivesContainer.innerHTML = html;
        }

        function loadQuestion(index) {
            currentIndex = index;
            const q = currentQuestions[index];
            userInput = "";
            isAnimating = false;
            // hintsRemaining = 3; // Removed Reset
            updateHintUI();

            elCurrentCount.innerText = index + 1;

            // Get root meaning from rootData
            const rootInfo = rootData[q.group];
            const rootMean = rootInfo ? rootInfo.mean.toUpperCase() : "UNKNOWN";
            elRootHint.innerText = `ROOT: ${q.group} - ${rootMean}`;

            if (q.def.includes('\n')) {
                elDef.className = "text-slate-700 font-medium text-sm sm:text-base leading-snug text-left w-full";
            } else {
                elDef.className = "text-slate-700 font-bold text-xl leading-tight text-center";
            }
            elDef.innerText = q.def;
            elMsg.style.transform = "translateY(100%)";

            // Layout Logic: Prefix vs Suffix
            elFixedPart.innerText = q.fixed;
            elInputPart.className = "flex gap-1";

            elWordContainer.innerHTML = '';
            if (q.mode === 'prefix') {
                elWordContainer.appendChild(elInputPart);
                elWordContainer.appendChild(elFixedPart);
            } else {
                elWordContainer.appendChild(elFixedPart);
                elWordContainer.appendChild(elInputPart);
            }
            updateAnswerDisplay();

            // Prepare Unique Letters
            let uniqueChars = new Set(q.tar.split(''));
            let letters = Array.from(uniqueChars);

            const commonLetters = "aeiounrstlmcdp";
            while (letters.length < 10) {
                const randomChar = commonLetters[Math.floor(Math.random() * commonLetters.length)];
                if (!uniqueChars.has(randomChar)) {
                    uniqueChars.add(randomChar);
                    letters.push(randomChar);
                }
            }
            letters.sort(() => Math.random() - 0.5);

            elContainer.innerHTML = '';
            letters.forEach(char => {
                const btn = document.createElement('button');
                btn.className = "btn-letter bg-white border-b-4 border-slate-200 active:border-b-0 active:translate-y-1 text-slate-700 text-xl font-bold rounded-xl h-14 flex items-center justify-center uppercase select-none shadow-sm";
                btn.innerText = char;
                btn.onclick = () => handleInput(char);
                elContainer.appendChild(btn);
            });
        }

        function updateAnswerDisplay() {
            const q = currentQuestions[currentIndex];
            let displayHtml = '';

            // Render user input letters in boxes
            for (let i = 0; i < userInput.length; i++) {
                displayHtml += `<div class="w-8 h-12 sm:w-10 sm:h-14 border-2 border-slate-800 bg-white rounded-lg flex items-center justify-center text-xl sm:text-2xl font-bold uppercase text-slate-800 shadow-sm">${userInput[i]}</div>`;
            }

            // Render remaining empty boxes
            const remainingLen = q.tar.length - userInput.length;
            for (let i = 0; i < remainingLen; i++) {
                displayHtml += `<div class="w-8 h-12 sm:w-10 sm:h-14 border-2 border-slate-300 bg-slate-50 rounded-lg flex items-center justify-center shadow-inner"></div>`;
            }

            elInputPart.innerHTML = displayHtml;
        }

        function updateHintUI() {
            elHintCount.innerText = hintsRemaining;
            if (hintsRemaining > 0) {
                btnHint.disabled = false;
                btnHint.classList.remove('opacity-50');
            } else {
                btnHint.disabled = true;
                btnHint.classList.add('opacity-50');
            }
        }

        function useHint() {
            if (isAnimating || hintsRemaining <= 0) return;
            const q = currentQuestions[currentIndex];
            sfxHint();
            hintsRemaining--;
            updateHintUI();

            if (!q.tar.startsWith(userInput)) userInput = "";
            userInput += q.tar[userInput.length];
            updateAnswerDisplay();

            if (userInput.length === q.tar.length) checkAnswer();
        }

        function handleInput(char) {
            if (isAnimating) return;

            const q = currentQuestions[currentIndex];
            if (userInput.length < q.tar.length) {
                const expectedChar = q.tar[userInput.length].toLowerCase();

                if (char.toLowerCase() === expectedChar) {
                    sfxClick();
                    userInput += char;
                    updateAnswerDisplay();
                    if (userInput.length === q.tar.length) checkAnswer();
                } else {
                    // Logic for wrong letter clicked
                    mistakes++;
                    updateLivesUI();
                    sfxWrong();

                    if (mistakes >= MAX_MISTAKES) {
                        isAnimating = true; // Block input
                        showToast("GAME OVER", "bg-red-600");
                        elInputPart.classList.add('shake');
                        elInputPart.querySelectorAll('div').forEach(div => {
                            div.classList.add('border-red-400', 'bg-red-50', 'text-red-500');
                        });
                        gameResults.push({ correct: false, word: q.mode === 'prefix' ? (q.tar + q.fixed) : (q.fixed + q.tar), def: q.def });

                        setTimeout(() => {
                            // Forfeit remaining questions
                            while (gameResults.length < currentQuestions.length) {
                                let remQ = currentQuestions[gameResults.length];
                                gameResults.push({ correct: false, word: remQ.mode === 'prefix' ? (remQ.tar + remQ.fixed) : (remQ.fixed + remQ.tar), def: remQ.def });
                            }
                            showResults(true); // pass true for gameOver flag
                        }, 1500);
                        return;
                    }

                    // Not game over, just a wrong letter
                    elInputPart.classList.remove('shake'); // Reset valid shake if re-triggered quick
                    // Trigger reflow
                    void elInputPart.offsetWidth;
                    elInputPart.classList.add('shake');
                    setTimeout(() => elInputPart.classList.remove('shake'), 400); // Cleanup
                }
            }
        }

        // Backspace feature was removed

        function checkAnswer() {
            const q = currentQuestions[currentIndex];
            if (userInput === q.tar) {
                isAnimating = true;
                sfxCorrect();
                gameResults.push({ correct: true, word: q.mode === 'prefix' ? (q.tar + q.fixed) : (q.fixed + q.tar), def: q.def });
                showToast("CORRECT!", "bg-green-500");

                elInputPart.querySelectorAll('div').forEach(div => {
                    div.classList.remove('border-slate-800', 'bg-white');
                    div.classList.add('border-green-500', 'bg-green-50', 'text-green-600');
                });

                setTimeout(() => nextQuestion(), 1200);
            } else {
                // We should theoretically never reach here because handleInput 
                // prevents wrong letters from adding to userInput. 
                // But just in case, we'll keep a simple warning.
                sfxWrong();
                showToast("TRY AGAIN", "bg-red-500");
                elInputPart.classList.add('shake');

                elInputPart.querySelectorAll('div').forEach(div => {
                    div.classList.add('border-red-400', 'bg-red-50', 'text-red-500');
                });

                setTimeout(() => {
                    elInputPart.classList.remove('shake');
                    // Reset style for next attempt
                    elInputPart.querySelectorAll('div').forEach(div => {
                        div.classList.remove('border-red-400', 'bg-red-50', 'text-red-500');
                        div.classList.add('border-slate-800', 'bg-white', 'text-slate-800');
                    });
                }, 500);
                setTimeout(() => elMsg.style.transform = "translateY(100%)", 1000);
            }
        }

        function showToast(text, colorClass) {
            elMsg.innerText = text;
            elMsg.className = `h-16 w-full absolute bottom-0 left-0 flex items-center justify-center text-xl font-black text-white translate-y-0 transition-transform duration-300 z-50 shadow-lg ${colorClass}`;
        }

        function skipQuestion() {
            if (isAnimating) return;
            const q = currentQuestions[currentIndex];
            gameResults.push({ correct: false, word: q.mode === 'prefix' ? (q.tar + q.fixed) : (q.fixed + q.tar), def: q.def });
            nextQuestion();
        }

        function nextQuestion() {
            if (currentIndex < currentQuestions.length - 1) {
                loadQuestion(currentIndex + 1);
            } else {
                showResults();
            }
        }

        function showResults(isGameOver = false) {
            viewGame.classList.add('hidden');
            viewResult.classList.remove('hidden');
            elProgress.classList.add('hidden');
            elLivesContainer.classList.add('hidden');
            elMsg.style.transform = "translateY(100%)";

            // If game over, change title to game over
            const resultTitle = viewResult.querySelector('h2');
            if (isGameOver) {
                resultTitle.innerText = "GAME OVER";
                resultTitle.classList.replace('text-slate-800', 'text-red-600');
            } else {
                resultTitle.innerText = "RESULTS";
                resultTitle.classList.replace('text-red-600', 'text-slate-800');
            }

            const correctCount = gameResults.filter(r => r.correct).length;
            const total = gameResults.length;
            elScoreDisplay.innerText = `${correctCount}/${total}`;

            elResultList.innerHTML = '';
            gameResults.forEach(r => {
                const li = document.createElement('li');
                li.className = "p-4 flex justify-between items-center";
                const iconHtml = r.correct
                    ? `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-green-500 w-6 h-6"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>`
                    : `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-red-400 w-6 h-6"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg>`;
                li.innerHTML = `
                    <div class="flex flex-col">
                        <span class="font-bold text-lg ${r.correct ? 'text-slate-800' : 'text-slate-400 line-through decoration-red-400'}">${r.word}</span>
                        <span class="text-xs text-slate-500 font-medium">${r.def}</span>
                    </div>
                    <div>${iconHtml}</div>
                `;
                elResultList.appendChild(li);
            });

            if (correctCount === total && total > 0) {
                sfxWin();
                fireConfetti();
            }
        }

        function fireConfetti() {
            var duration = 3000;
            var animationEnd = Date.now() + duration;
            var defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };
            var interval = setInterval(function () {
                var timeLeft = animationEnd - Date.now();
                if (timeLeft <= 0) return clearInterval(interval);
                var particleCount = 50 * (timeLeft / duration);
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: Math.random(), y: Math.random() - 0.2 } }));
            }, 250);
        }

        document.addEventListener('keydown', (e) => {
            if (!viewGame.classList.contains('hidden')) {
                if (/^[a-zA-Z]$/.test(e.key)) {
                    handleInput(e.key.toLowerCase());
                }
            }
        });
    </script>
</body>

</html>