<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive TCM Quiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            background-color: #F7F3EF;
            font-family: 'Inter', 'Noto Sans KR', sans-serif;
            transition: background-color 0.3s;
        }
        .quiz-option {
            transition: background-color 0.2s, color 0.2s, border-color 0.2s;
        }
        .correct {
            background-color: #22c55e !important;
            color: white !important;
            border-color: #16a34a !important;
        }
        .incorrect {
            background-color: #ef4444 !important;
            color: white !important;
            border-color: #dc2626 !important;
        }
        .explanation {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out, padding 0.5s ease-in-out;
            border-color: transparent;
        }
        .explanation.show {
            max-height: 500px;
            padding: 1rem;
            border-color: #e5e7eb;
        }
    </style>
</head>
<body class="text-gray-800">

    <header id="page-header" style="width: 100%; max-width: 48rem; margin: 1rem auto; padding: 0 1rem; display: flex; justify-content: space-between; align-items: center;">
        <a href="index.html" id="header-link" style="font-size: 1.125rem; font-weight: 600; color: rgb(55, 65, 81); text-decoration: none;">
            &larr; Interactive TCM
        </a>
        <a href="#" onclick="toggleLanguage(event)" class="px-3 py-1 bg-stone-200 text-stone-700 rounded-md text-sm font-bold hover:bg-stone-300 transition-colors">
            Kor / Eng
        </a>
    </header>

    <main class="w-full max-w-3xl mx-auto p-4 md:p-6">
        <div id="quiz-container" class="bg-white rounded-xl shadow-lg overflow-hidden" style="display: block;">
            <div id="progress-bar" class="w-0 h-2 bg-green-500 transition-all duration-300"></div>
            <div class="p-6 md:p-8">
                <div id="quiz-header" class="flex justify-between items-center mb-4">
                    <p id="question-counter" class="text-sm font-semibold text-gray-500"></p>
                    <p id="difficulty-badge" class="px-3 py-1 text-xs font-bold rounded-full"></p>
                </div>
                <h2 id="question-text" class="text-lg md:text-xl font-bold mb-6 min-h-[100px]"></h2>
                <div id="options-container" class="space-y-3">
                    <!-- Options will be inserted here -->
                </div>
                <div id="feedback-container" class="mt-6">
                    <div id="explanation-box" class="explanation bg-gray-50 border rounded-lg text-left">
                        <h3 id="explanation-title" class="font-bold text-lg mb-2"></h3>
                        <p id="explanation-text" class="text-gray-700"></p>
                    </div>
                </div>
            </div>
            <div id="quiz-footer" class="bg-gray-50 px-6 py-4 border-t border-gray-200">
                <button id="next-button" class="w-full bg-gray-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-gray-700 transition-colors focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-50" style="display: none;"></button>
            </div>
        </div>

        <!-- Result Screen -->
        <div id="result-container" class="bg-white rounded-xl shadow-lg overflow-hidden" style="display: none;">
            <div class="p-8 text-center">
                <h2 id="result-title" class="text-3xl font-bold mb-2"></h2>
                <p id="result-score" class="text-5xl font-bold text-green-600 mb-4"></p>
                <p id="result-message" class="text-gray-600 mb-8"></p>
                <button id="restart-button" class="bg-gray-800 text-white font-bold py-3 px-6 rounded-lg hover:bg-gray-700 transition-colors"></button>
            </div>
        </div>
    </main>

    <footer class="text-center py-8 mt-12 text-sm text-gray-500">
        <p>&copy; 2024 Hyungsuk Choi. All Rights Reserved.</p>
    </footer>

    <script>
        // --- DATA SOURCE ---
        // 내장된 퀴즈 데이터
        const sampleQuizData = {
            ko: {
                '하': [
                    {
                        question: "한의학에서 기(氣)란 무엇을 의미하나요?",
                        options: {
                            "1": "생명의 근본 에너지",
                            "2": "혈액의 구성 요소",
                            "3": "근육의 움직임",
                            "4": "뼈의 밀도"
                        },
                        answer: "1",
                        explanation: "기(氣)는 한의학에서 생명활동을 유지하는 근본적인 에너지로 여겨집니다.",
                        difficulty: "하"
                    },
                    {
                        question: "오장육부에서 '오장'은 몇 개의 장기를 말하나요?",
                        options: {
                            "1": "4개",
                            "2": "5개",
                            "3": "6개",
                            "4": "7개"
                        },
                        answer: "2",
                        explanation: "오장은 심(心), 간(肝), 비(脾), 폐(肺), 신(腎)의 5개 장기를 말합니다.",
                        difficulty: "하"
                    },
                    {
                        question: "한의학에서 혈(血)의 기능이 아닌 것은?",
                        options: {
                            "1": "영양 공급",
                            "2": "정신 활동 지원",
                            "3": "체온 조절",
                            "4": "소화 작용"
                        },
                        answer: "4",
                        explanation: "소화 작용은 비위(脾胃)의 주요 기능이며, 혈(血)은 영양 공급, 정신 활동 지원, 체온 조절 등의 기능을 합니다.",
                        difficulty: "하"
                    },
                    {
                        question: "한의학의 기본 이론 중 하나인 '음양론'에서 음(陰)에 해당하는 것은?",
                        options: {
                            "1": "낮",
                            "2": "더위",
                            "3": "밤",
                            "4": "활동"
                        },
                        answer: "3",
                        explanation: "음(陰)은 밤, 추위, 정적, 하강 등의 특성을 가지며, 양(陽)은 낮, 더위, 활동, 상승 등의 특성을 가집니다.",
                        difficulty: "하"
                    },
                    {
                        question: "침술에서 사용하는 기본적인 자극 방법이 아닌 것은?",
                        options: {
                            "1": "자침",
                            "2": "뜸",
                            "3": "부항",
                            "4": "수술"
                        },
                        answer: "4",
                        explanation: "한의학의 기본적인 치료법은 자침, 뜸, 부항, 추나 등이며, 수술은 현대 의학의 치료법입니다.",
                        difficulty: "하"
                    }
                ],
                '중': [
                    {
                        question: "음양이론에서 '양'의 특성이 아닌 것은?",
                        options: {
                            "1": "따뜻함",
                            "2": "활동성",
                            "3": "차가움",
                            "4": "밝음"
                        },
                        answer: "3",
                        explanation: "차가움은 음(陰)의 특성입니다. 양(陽)은 따뜻함, 활동성, 밝음 등의 특성을 가집니다.",
                        difficulty: "중"
                    },
                    {
                        question: "오행론에서 '목(木)'에 해당하는 장기는?",
                        options: {
                            "1": "심(心)",
                            "2": "간(肝)",
                            "3": "비(脾)",
                            "4": "폐(肺)"
                        },
                        answer: "2",
                        explanation: "오행론에서 간(肝)은 목(木)에 해당합니다. 심(心)은 화(火), 비(脾)는 토(土), 폐(肺)는 금(金)에 해당합니다.",
                        difficulty: "중"
                    }
                ],
                '상': [
                    {
                        question: "사상체질의학을 창시한 한의학자는?",
                        options: {
                            "1": "허준",
                            "2": "이제마",
                            "3": "동의보감",
                            "4": "황제내경"
                        },
                        answer: "2",
                        explanation: "사상체질의학은 조선시대 말기 이제마가 창시한 한의학 이론입니다.",
                        difficulty: "상"
                    },
                    {
                        question: "'동의보감'을 저술한 인물은?",
                        options: {
                            "1": "이제마",
                            "2": "허준",
                            "3": "장중경",
                            "4": "이시진"
                        },
                        answer: "2",
                        explanation: "동의보감은 조선시대 허준이 저술한 대표적인 한의학 서적입니다.",
                        difficulty: "상"
                    },
                    {
                        question: "팔강변증에서 '팔강'에 포함되지 않는 것은?",
                        options: {
                            "1": "음양",
                            "2": "표리",
                            "3": "한열",
                            "4": "오행"
                        },
                        answer: "4",
                        explanation: "팔강변증의 팔강은 음양, 표리, 한열, 허실입니다. 오행은 별도의 이론 체계입니다.",
                        difficulty: "상"
                    },
                    {
                        question: "십이경맥 중 수양명대장경의 시작점은?",
                        options: {
                            "1": "엄지손가락",
                            "2": "검지손가락",
                            "3": "중지손가락",
                            "4": "새끼손가락"
                        },
                        answer: "2",
                        explanation: "수양명대장경은 검지손가락 끝(상양혈)에서 시작하여 코 옆(영향혈)에서 끝납니다.",
                        difficulty: "상"
                    },
                    {
                        question: "사상체질 중 '소양인'의 특징이 아닌 것은?",
                        options: {
                            "1": "비위가 약함",
                            "2": "신기능이 강함",
                            "3": "성격이 급함",
                            "4": "폐기능이 약함"
                        },
                        answer: "4",
                        explanation: "소양인은 비위가 약하고 신기능이 강하며 성격이 급한 특징이 있습니다. 폐기능이 약한 것은 소음인의 특징입니다.",
                        difficulty: "상"
                    }
                ]
            },
            en: {
                'Easy': [
                    {
                        question: "What does Qi (氣) mean in Traditional Chinese Medicine?",
                        options: {
                            "1": "Fundamental energy of life",
                            "2": "Component of blood",
                            "3": "Muscle movement",
                            "4": "Bone density"
                        },
                        answer: "1",
                        explanation: "Qi (氣) is considered the fundamental energy that maintains life activities in Traditional Chinese Medicine.",
                        difficulty: "Easy"
                    },
                    {
                        question: "How many organs does 'Wu Zang' (Five Organs) refer to?",
                        options: {
                            "1": "4 organs",
                            "2": "5 organs",
                            "3": "6 organs",
                            "4": "7 organs"
                        },
                        answer: "2",
                        explanation: "Wu Zang refers to 5 organs: Heart, Liver, Spleen, Lung, and Kidney.",
                        difficulty: "Easy"
                    },
                    {
                        question: "What is NOT a function of Blood (血) in TCM?",
                        options: {
                            "1": "Nutrition supply",
                            "2": "Mental activity support",
                            "3": "Temperature regulation",
                            "4": "Digestion"
                        },
                        answer: "4",
                        explanation: "Digestion is mainly the function of Spleen and Stomach. Blood functions include nutrition supply, mental activity support, and temperature regulation.",
                        difficulty: "Easy"
                    },
                    {
                        question: "Which corresponds to Yin (陰) in Yin-Yang theory?",
                        options: {
                            "1": "Day",
                            "2": "Heat",
                            "3": "Night",
                            "4": "Activity"
                        },
                        answer: "3",
                        explanation: "Yin represents night, cold, stillness, and descent, while Yang represents day, heat, activity, and ascent.",
                        difficulty: "Easy"
                    },
                    {
                        question: "Which is NOT a basic treatment metho
